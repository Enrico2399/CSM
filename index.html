<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodWheel - Esplora i tuoi colori</title>
    <style>
        :root {
            --bg-dark: #121212;
            --text-light: #f4f4f4;
            --accent: #ffffff;
        }

        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            overflow-x: hidden;
        }

        /* --- HOME: IL DISCO --- */
        #home {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            transition: transform 0.8s ease;
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .wheel-container:hover {
            transform: scale(1.05);
        }

        .slice {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: filter 0.3s;
        }

        .slice:hover {
            filter: brightness(1.2);
        }

        .slice-content {
            transform: rotate(-20deg); /* Compensa rotazione */
            font-size: 2rem;
        }

        /* --- DETTAGLIO COLORE --- */
        #detail-view {
            display: none;
            min-height: 100vh;
            padding: 40px;
            background-attachment: fixed;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(0,0,0,0.7);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .header-mood {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 20px;
        }

        .grid-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .section-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
        }

        .btn-back {
            background: white;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .vote-btn {
            background: none;
            border: 1px solid white;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            margin-left: 10px;
        }

        /* Colori specifici */
        .c-rosso { background: #e74c3c; }
        .c-giallo { background: #f1c40f; }
        .c-blu { background: #3498db; }
        .c-verde { background: #2ecc71; }
        .c-arancio { background: #e67e22; }
        .c-viola { background: #9b59b6; }
        .c-bianco { background: #ecf0f1; color: #222; }
        .c-nero { background: #2c3e50; }
        .c-grigio { background: #95a5a6; }


        .navbar {
            position: fixed; top: 0; width: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex; justify-content: center;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .navbar a {
            color: white; text-decoration: none;
            padding: 15px 25px; font-weight: bold; text-transform: uppercase;
            font-size: 0.8rem; letter-spacing: 1px;
        }

        /* Stile Leggenda e Pop-up */
        .legend-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 20px; margin-top: 20px; }
        .legend-item { cursor: pointer; background: var(--box-bg); padding: 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .legend-item:hover { background: rgba(255,255,255,0.2); }

        .popup-overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center; }
        .popup-content { background: #222; padding: 30px; border-radius: 20px; max-width: 400px; text-align: center; border: 1px solid var(--accent); position: relative; }
        .close-popup { position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 1.5rem; }

        /* Fix pulsante coperto */
        #detail-view { padding-top: 100px; } /* Aumenta lo spazio superiore */
        .btn-back { margin-bottom: 20px; }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="index.html" style="border-bottom: 2px solid white;">Mood Wheel</a>
        <a href="archetipi.html">Pantheon Archetipico</a>
        <a href="help.html">SOS Help</a>
    </nav>
    <section id="home">
        <h1>Come ti senti oggi?</h1>
        <p>Seleziona un colore dal disco</p>
        <div class="wheel-container" id="wheel">
            </div>
    </section>
    <p></p><br>
    <div class="legend-container" id="color-legend"></div>

    <div id="popup" class="popup-overlay" onclick="closePopup()">
        <div class="popup-content" onclick="event.stopPropagation()">
            <span class="close-popup" onclick="closePopup()">&times;</span>
            <h2 id="pop-title"></h2>
            <p id="pop-desc"></p>
        </div>
    </div>
    <section id="detail-view">
        <button class="btn-back" onclick="goHome()">‚Üê Torna al Disco</button>
        <div class="container">
            <div class="header-mood">
                <h1 id="mood-title">Colore</h1>
                <span id="mood-icon" style="font-size: 3rem;"></span>
            </div>

            <div class="grid-sections">
                <div class="section-box">
                    <h3>Psicologia ed Effetti</h3>
                    <p id="mood-psych"></p>
                    <p><strong>Effetto:</strong> <span id="mood-effect"></span></p>
                </div>

                <div class="section-box">
                    <h3>Esercizio Consigliato</h3>
                    <div id="mood-exercise">
                        </div>
                </div>
            </div>

            <div class="section-box" style="margin-top:20px;">
                <h3>Suggerimenti della Community</h3>
                <ul id="community-list" style="list-style: none; padding: 0;">
                    </ul>
                <div style="margin-top:15px;">
                    <input type="text" id="new-tip" placeholder="Aggiungi un consiglio..." style="padding:10px; width:70%; border-radius:5px; border:none;">
                    <button onclick="addTip()" style="padding:10px;">Invia</button>
                </div>
            </div>
        </div>
    </section>

    <script>
        const moods = {
            rosso: { title: "Rosso", icon: "üî•", psych: "Passione, Energia / Rabbia, Pericolo", effect: "Aumenta battito cardiaco e adrenalina.", class: "c-rosso", exercise: "Fare 10 saltelli sul posto per scaricare l'energia." },
            giallo: { title: "Giallo", icon: "‚òÄÔ∏è", psych: "Felicit√†, Ottimismo / Ansia, Frustrazione", effect: "Stimola la mente e la concentrazione.", class: "c-giallo", exercise: "Scrivi 3 cose per cui sei grato oggi." },
            blu: { title: "Blu", icon: "üåä", psych: "Calma, Fiducia / Freddezza, Malinconia", effect: "Riduce la pressione e favorisce il relax.", class: "c-blu", exercise: "Segui il respiro: inspira per 4 secondi, espira per 6." },
            verde: { title: "Verde", icon: "üåø", psych: "Armonia, Crescita / Invidia, Noia", effect: "Riduce lo stress, favorisce l'equilibrio.", class: "c-verde", exercise: "Guarda fuori dalla finestra per 2 minuti cercando il verde." },
            arancio: { title: "Arancione", icon: "üçä", psych: "Entusiasmo, Socievolezza / Impulsivit√†", effect: "Stimola la creativit√† e la socializzazione.", class: "c-arancio", exercise: "Chiama o scrivi un messaggio a un amico che non senti da tempo." },
            viola: { title: "Viola", icon: "üîÆ", psych: "Spiritualit√†, Mistero / Solitudine", effect: "Stimola l'immaginazione e calma la mente.", class: "c-viola", exercise: "Disegna una forma astratta senza staccare la penna dal foglio." },
            bianco: { title: "Bianco", icon: "‚òÅÔ∏è", psych: "Purezza, Semplicit√† / Isolamento", effect: "Crea sensazione di spazio e chiarezza.", class: "c-bianco", exercise: "Chiudi gli occhi e visualizza una stanza vuota e luminosa." },
            nero: { title: "Nero", icon: "üé±", psych: "Eleganza, Potere / Oppressione, Paura", effect: "Comunica autorit√† e definisce i confini.", class: "c-nero", exercise: "Scrivi su un foglio una paura e poi strappalo." },
            grigio: { title: "Grigio", icon: "üå™Ô∏è", psych: "Neutralit√†, Equilibrio / Monotonia", effect: "Riduce gli stimoli, crea stabilit√†.", class: "c-grigio", exercise: "Riordina 5 oggetti sulla tua scrivania per ritrovare ordine." }
        };

        const wheel = document.getElementById('wheel');
        const keys = Object.keys(moods);
        const angleStep = 360 / keys.length;

        // Generazione Disco
        keys.forEach((key, i) => {
            const slice = document.createElement('div');
            slice.className = `slice ${moods[key].class}`;
            const angle = i * angleStep;
            slice.style.transform = `rotate(${angle}deg) skewY(${90 - angleStep}deg)`;
            
            slice.onclick = () => showMood(key);
            
            const content = document.createElement('div');
            content.className = 'slice-content';
            //content.innerHTML = moods[key].icon;
            // Posizionamento icona
            content.style.transform = `rotate(-${angle}deg) skewY(-${90 - angleStep}deg) translate(100px, 100px)`;

            slice.appendChild(content);
            wheel.appendChild(slice);
        });

        function showMood(key) {
            const mood = moods[key];
            document.getElementById('home').style.display = 'none';
            const detail = document.getElementById('detail-view');
            detail.style.display = 'block';
            detail.className = mood.class;

            document.getElementById('mood-title').innerText = mood.title;
            document.getElementById('mood-icon').innerText = mood.icon;
            document.getElementById('mood-psych').innerText = mood.psych;
            document.getElementById('mood-effect').innerText = mood.effect;
            document.getElementById('mood-exercise').innerHTML = `<p>${mood.exercise}</p>`;
            
            // Simula caricamento community
            const list = document.getElementById('community-list');
            list.innerHTML = `<li>‚ú® Prova a meditare per 5 min <button class="vote-btn">‚ñ≤ 12</button></li>
                              <li>‚ú® Leggi un libro di poesie <button class="vote-btn">‚ñ≤ 5</button></li>`;
        }

        function goHome() {
            document.getElementById('home').style.display = 'flex';
            document.getElementById('detail-view').style.display = 'none';
        }

        function addTip() {
            const input = document.getElementById('new-tip');
            if(input.value.trim() !== "") {
                const li = document.createElement('li');
                li.innerHTML = `‚ú® ${input.value} <button class="vote-btn">‚ñ≤ 1</button>`;
                document.getElementById('community-list').appendChild(li);
                input.value = "";
            }
        }
        const legend = document.getElementById('color-legend');
        keys.forEach(key => {
            const item = document.createElement('div');
            item.className = 'legend-item';
            item.innerHTML = `${moods[key].icon} ${moods[key].title}`;
            item.onclick = () => openPopup(moods[key].title, moods[key].psych);
            legend.appendChild(item);
        });

        function openPopup(title, desc) {
            document.getElementById('pop-title').innerText = title;
            document.getElementById('pop-desc').innerText = desc;
            document.getElementById('popup').style.display = 'flex';
        }

        function closePopup() { document.getElementById('popup').style.display = 'none'; }
    </script>
</body>

</html>
